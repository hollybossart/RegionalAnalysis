---
title: "Shape Files"
output: html_notebook
---

```{r results = FALSE, include = FALSE}
library(sf)
library(sp)
library(tidyverse)
```

```{r results = FALSE, include = FALSE}
# read data
# aff_nocov <-
#   st_read("satSCANoutputs/aff_nocov.col.shp")
# alc_nocov <-
#   st_read("satSCANoutputs/alcohol_nocov.col.shp")
anx <-
  st_read("satSCANoutputs/anx.col.shp")
# ied <-
#   st_read("satSCANoutputs/ied.col.shp")
ukroblast <-
  st_read("ukraineGIS/gadm36_UKR_1.shp")
```

```{r}
# anxiety map
ukroblast1 <-
  ukroblast %>%
  mutate(LOC_ID = as.factor(str_replace_all(NAME_1, "[^[:alnum:]]", "")))

anx_ind <-
  anx %>%
  mutate(RISK = ifelse(REL_RISK > 1, "High", "Low")) %>%
  filter(GINI_CLUST == 'T')

ukroblast_map <-
  ukroblast %>%
  st_join(anx_ind, by = "LOC_ID") %>%
  filter(!((NAME_1 == "Zhytomyr") & (RISK == "Low")))

ggplot(data = ukroblast_map, aes(fill = RISK)) +
  geom_sf() +
  labs(title = "Anxiety Disorder Clusters") +
  theme(panel.grid.major = element_blank(), 
        panel.grid.minor = element_blank())

# view <- ukroblast_map %>%
#   select(NAME_1, P_VALUE, REL_RISK, CLUSTER)
```


```{r}
# ggplot(data = ukroblast) +
#   geom_sf() + 
#   geom_sf(data = ied, aes(alpha = 0.00000001)) +
#   labs(title = "IED Clusters") +
#   theme(panel.grid.major = element_blank(), 
#         panel.grid.minor = element_blank(),
#         legend.position = "none")
# 
# ggplot(data = ukroblast) +
#   geom_sf() + 
#   geom_sf(data = aff_nocov, aes(alpha = 0.00000001)) +
#   labs(title = "Affective Disorders Clusters") +
#   theme(panel.grid.major = element_blank(), 
#         panel.grid.minor = element_blank(),
#         legend.position = "none")
# 
# ggplot(data = ukroblast) +
#   geom_sf() + 
#   geom_sf(data = alc_nocov, aes(alpha = 0.00000001)) +
#   labs(title = "Alcohol Disorder Clusters") +
#   theme(panel.grid.major = element_blank(), 
#         panel.grid.minor = element_blank(),
#         legend.position = "none")

ggplot(data = ukroblast) +
  geom_sf() + 
  geom_sf(data = anx_ind, aes(alpha = 0.00000001)) +
  labs(title = "Anxiety Disorders Clusters") +
  theme(panel.grid.major = element_blank(), 
        panel.grid.minor = element_blank(),
        legend.position = "none")
```










